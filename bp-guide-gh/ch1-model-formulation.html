
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Model Formulation &#8212; Phase Field Method Recommended Practices</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'bp-guide-gh/ch1-model-formulation';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Numerical Implementation" href="ch2-numerical-implementation.html" />
    <link rel="prev" title="Phase Field Method Recommended Practices" href="../intro.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/pfhub-logo.jpg" class="logo__image only-light" alt="Phase Field Method Recommended Practices - Home"/>
    <img src="../_static/pfhub-logo.jpg" class="logo__image only-dark pst-js-only" alt="Phase Field Method Recommended Practices - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Phase Field Method Recommended Practices
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Importing GH Wiki</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Model Formulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch2-numerical-implementation.html">Numerical Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch3-data-generation-and-curation.html">Data Generation and Curation</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch4-software-development.html">Software Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch5-problem-setup.html">Problem Set-Up</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch6-result-dissemination.html">Result Dissemination</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Default Pages</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../defaults/markdown.html">Markdown Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../defaults/markdown-notebooks.html">Notebooks with MyST Markdown</a></li>
<li class="toctree-l1"><a class="reference internal" href="../defaults/notebooks.html">Content with notebooks</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/usnistgov/pf-recommended-practices" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/usnistgov/pf-recommended-practices/issues/new?title=Issue%20on%20page%20%2Fbp-guide-gh/ch1-model-formulation.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/bp-guide-gh/ch1-model-formulation.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Model Formulation</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#general-considerations-on-the-formulation-of-phase-field-models">General Considerations on the formulation of phase field models</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#evolution-equations">Evolution equations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mass">Mass</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#momentum">Momentum</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#energy">Energy</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#first-law-of-thermodynamics">First Law of Thermodynamics</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#second-law">Second Law</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#constitutive-equations-and-evolution-equations">Constitutive Equations and Evolution Equations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#further-reduction-of-the-problem">Further reduction of the problem</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clearly-define-the-equations-parameters-initial-conditions-and-boundar-conditions">Clearly define the equations, parameters, initial conditions, and boundar conditions</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#state-function">State function</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#step-1">Step 1</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#step-2">Step 2</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#step-3">Step 3</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clearly-define-and-pose-your-physical-problem-before-solving">Clearly define and pose your physical problem before solving</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#complete-dimensional-analysis-and-understanding-relevant-scales-state-the-reference-frame">Complete dimensional analysis and understanding relevant scales; state the reference frame</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-your-state-functions-before-implementing-them-in-code">Plot your state functions before implementing them in code</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#consider-the-impact-of-interpolation-functions-barrier-functions-etc">Consider the impact of interpolation functions, barrier functions, etc.</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#consider-every-boundary-term-and-make-sure-you-arent-eliminating-important-terms-check-the-fluxes">Consider every boundary term and make sure you aren’t eliminating important terms. Check the fluxes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#carefully-consider-your-length-and-time-scales">Carefully consider your length and time scales</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="model-formulation">
<h1>Model Formulation<a class="headerlink" href="#model-formulation" title="Link to this heading">#</a></h1>
<p>Nana Ofori-Opuku, Jim Warren, Pierre-Clement Simon</p>
<ul class="simple">
<li><p>Review the literature</p>
<ul>
<li><p>Start with a careful lit review and see what others have done.</p></li>
<li><p>Take the time to understand the derivations from the literature.</p></li>
<li><p>Consider good examples from the literature (Can we list these on PFHub?)</p></li>
</ul>
</li>
</ul>
<section id="general-considerations-on-the-formulation-of-phase-field-models">
<h2>General Considerations on the formulation of phase field models<a class="headerlink" href="#general-considerations-on-the-formulation-of-phase-field-models" title="Link to this heading">#</a></h2>
<p>Phase field models are, quite generally, extensions of classical
non-equilibrium thermodynamics. There are quite a few treatments of this in the
literature.  Here we will follow formulations similar to those developed by
Sekerka and Bi in “Interfaces for the Twenty-First Century.”
<span id="id1">[<a class="reference internal" href="#id13" title="Zhiqiang Bi and Robert F. Sekerka. Phase-field model of solidification of a binary alloy. Physica A: Statistical Mechanics and its Applications, 261(1):95–106, December 1998. URL: https://www.sciencedirect.com/science/article/pii/S0378437198003641 (visited on 2024-09-05), doi:10.1016/S0378-4371(98)00364-1.">BS98</a>]</span> In that spirit, we will start with a very general
formulation, including hydrodynamics, and then simplify the problem.  For those
interested in starting with a simple model, you can skip over much of the
initial formulation and jump to the section on the further reduction of the
problem.</p>
<p>In thermodynamics one usually starts from consideration of the internal energy
<span class="math notranslate nohighlight">\(E\)</span>, where <span class="math notranslate nohighlight">\(E=E(S,V,M_i)\)</span>, and <span class="math notranslate nohighlight">\(S\)</span> is the entropy, <span class="math notranslate nohighlight">\(V\)</span> is the volume and <span class="math notranslate nohighlight">\(M_i\)</span>
is the mass of species <span class="math notranslate nohighlight">\(i\)</span>. If we decide we don’t want to consider elasticity
we can divide through by the volume and compute the bulk energy density
<span class="math notranslate nohighlight">\(e=e(s,\rho_i)\)</span>, with <span class="math notranslate nohighlight">\(\rho_i=M_i/V\)</span>, and similarly <span class="math notranslate nohighlight">\(s=S/V\)</span>. It is then usually
postulated that in addition to the thermodynamic variables there are any number
of <em>phase fields</em> <span class="math notranslate nohighlight">\(\phi_j\)</span> and the internal energy density is written</p>
<div class="math notranslate nohighlight">
\[e=e(s,\rho_i,\phi_j).\]</div>
<p>Here we are going to consider a single phase field <span class="math notranslate nohighlight">\(\phi\)</span> that distinguishes
between two phases (could be liquid-solid, could be solid-gas, etc.) and
postulate that the total entropy of a system of volume <span class="math notranslate nohighlight">\(V\)</span> can be written as</p>
<div class="math notranslate nohighlight">
\[S = \int s^{NC} dV,\]</div>
<p>where</p>
<div class="math notranslate nohighlight">
\[s^{NC}=s-\frac{\epsilon^2}{2}|\nabla\phi|^2-\sum_i \frac{\alpha_i^2}{2}|\nabla\rho_i|^2.\]</div>
<p>Here the superscript <span class="math notranslate nohighlight">\(NC\)</span> is meant to indicate that this is a non-classical
definition of the entropy density <span class="math notranslate nohighlight">\(s\)</span>. We have chosen the simplest possible
forms of the non-classical extensions (that is, simple square-gradient
penalties). The entropy density is itself a function, of course,</p>
<div class="math notranslate nohighlight">
\[s=s(e,\rho_i,\phi).\]</div>
<p>To close the deal we now need to work our way through the various
continuum-versions of the laws of nature.</p>
<section id="evolution-equations">
<h3>Evolution equations<a class="headerlink" href="#evolution-equations" title="Link to this heading">#</a></h3>
<p>In order to write down evolution equations we need to resort to the known laws
of physics. For continuum theories, we really have only a few ideas to fall
back on</p>
<ul class="simple">
<li><p>Conservation of mass</p></li>
<li><p>Conservation of energy (First Law of Thermodynamics)</p></li>
<li><p>Conservation of momentum and maybe angular momentum if absolutely necessary</p></li>
<li><p>The second law of thermodynamics (entropy increases, free energy decreases…)</p></li>
</ul>
<p>A complete discussion of how to use the above rules in this context is outside
the scope of this best-practice guide, but we offer a highly abbreviated
discussion of the ‘’flavor,’’ following the ideas of irreversible
thermodynamics (we largely are following works like deGroot and Mazur
<span id="id2">[<a class="reference internal" href="#id15" title="S. R. De Groot and P. Mazur. Non-Equilibrium Thermodynamics. Courier Corporation, January 2013. ISBN 9780486153506. Google-Books-ID: mfFyG9jfaMYC.">GM13</a>]</span>, although the continuum mechanics community
may be more comfortable with Noll, Coleman, and Truesdale
<span id="id3">[<a class="reference internal" href="#id20" title="Lawrence E. Malvern. Introduction to the Mechanics of a Continuous Medium. Prentice-Hall, 1969. ISBN 9780134876030. Google-Books-ID: IIMpAQAAMAAJ.">Mal69</a>]</span>), as well as the aforementioned work by
Sekerka and Bi <span id="id4">[<a class="reference internal" href="#id13" title="Zhiqiang Bi and Robert F. Sekerka. Phase-field model of solidification of a binary alloy. Physica A: Statistical Mechanics and its Applications, 261(1):95–106, December 1998. URL: https://www.sciencedirect.com/science/article/pii/S0378437198003641 (visited on 2024-09-05), doi:10.1016/S0378-4371(98)00364-1.">BS98</a>]</span>.</p>
</section>
<section id="mass">
<h3>Mass<a class="headerlink" href="#mass" title="Link to this heading">#</a></h3>
<p>The first idea is that we need to specify a flux of particles</p>
<div class="math notranslate nohighlight">
\[{\bf J}_i=\rho_i \left({\bf v}_i-{\bf v}\right),\]</div>
<p>where <span class="math notranslate nohighlight">\({\bf v}_i\)</span> is the velocity of the particles of species <span class="math notranslate nohighlight">\(i\)</span>.
In general we want to work in a center-of-mass frame</p>
<div class="math notranslate nohighlight">
\[{\bf v}=\frac{\sum_i \rho_i {\bf v}_i}{\sum_i \rho_i}.\]</div>
<p>Notice that this implies (by construction) that <span class="math notranslate nohighlight">\(\sum_i {\bf J}_i=0\)</span>.</p>
<p>The law of conservation of mass can be simply written as</p>
<div class="math notranslate nohighlight">
\[\frac{\partial \rho_i}{\partial t}+\nabla\cdot(\rho_i {\bf v}_i)=0.\]</div>
<p>Then we use the definition of <span class="math notranslate nohighlight">\({\bf J}_i\)</span> to rewrite that as</p>
<div class="math notranslate nohighlight">
\[\frac{\partial \rho_i}{\partial t}+ \nabla\cdot\left({\bf J}_i+\rho_i{\bf v}\right)=0.\]</div>
<p>Note that if we sum this equation over <span class="math notranslate nohighlight">\(i\)</span>, we get the continuity equation</p>
<div class="math notranslate nohighlight">
\[\frac{\partial \rho}{\partial t}+ \nabla\cdot\left(\rho{\bf v}\right)=0.\]</div>
<p>At this point it is common to introduce the notation</p>
<div class="math notranslate nohighlight">
\[\frac{D}{Dt}=\frac{\partial}{\partial t}+{\bf v}\cdot\nabla,\]</div>
<p>the “Lagrangian derivative” or “material derivative”. Then we can write the
mass conservation equation as</p>
<div class="math notranslate nohighlight">
\[\frac{D \rho_i}{Dt}+ \nabla\cdot{\bf J}_i+\rho_i\nabla\cdot{\bf v}=0.\]</div>
<p>If the system in incompressible (a common assumption, although we’d have to
abandon that if we want to consider gasses), then <span class="math notranslate nohighlight">\(\nabla\cdot{\bf v}=0\)</span> and we
can write</p>
<div class="math notranslate nohighlight">
\[\frac{D \rho_i}{Dt}+ \nabla\cdot{\bf J}_i=0.\]</div>
</section>
<section id="momentum">
<h3>Momentum<a class="headerlink" href="#momentum" title="Link to this heading">#</a></h3>
<p>The law of conservation of momentum (Newton’s second Law) for a system without
body forces (like gravity) can be written</p>
<div class="math notranslate nohighlight">
\[\frac{\partial\rho {\bf v}}{\partial t}+\nabla\cdot\left( \rho {\bf
v}\otimes{\bf v}-\sigma\right)=0,\]</div>
<p>where <span class="math notranslate nohighlight">\(\sigma\)</span> is the stress tensor.  Using continuity and incompressibility as
assumptions we get</p>
<div class="math notranslate nohighlight">
\[\rho\frac{D{\bf v}}{Dt}=\nabla\cdot\sigma.\]</div>
</section>
<section id="energy">
<h3>Energy<a class="headerlink" href="#energy" title="Link to this heading">#</a></h3>
<p>Our final conservation expression is for energy.  Just like the equation for
momentum and mass, we start with a continuity form, and assume a flux of
internal energy <span class="math notranslate nohighlight">\({\bf J}_e\)</span>, and distinguish between the total energy density
<span class="math notranslate nohighlight">\(e_T\)</span>, the internal energy density <span class="math notranslate nohighlight">\(e\)</span> and the kinetic energy density
<span class="math notranslate nohighlight">\(e_k=e_T-e= \frac{1}{2}\rho v^2\)</span> and write</p>
<div class="math notranslate nohighlight">
\[\frac{\partial e_T}{\partial t}+\nabla\cdot\left(e_T{\bf v}+{\bf J}_e\right)=0.\]</div>
<p>We can then use the momentum equation as well as the mass continuity equation
(along with incompressibility) to arrive at</p>
<div class="math notranslate nohighlight">
\[\frac{D e}{D t}+\nabla\cdot{\bf J}_e=\nabla{\bf v}:\sigma.\]</div>
</section>
<section id="first-law-of-thermodynamics">
<h3>First Law of Thermodynamics<a class="headerlink" href="#first-law-of-thermodynamics" title="Link to this heading">#</a></h3>
<p>We now write down the laws of thermodynamics for the densities.</p>
<div class="math notranslate nohighlight">
\[e=Ts-p+\sum_i\rho_i\mu_i,\]</div>
<p>where <span class="math notranslate nohighlight">\(p\)</span> is the hydrostatic pressure,</p>
<div class="math notranslate nohighlight">
\[p=-\frac{1}{3}{\mathrm{Tr}}\sigma,\]</div>
<p>and <span class="math notranslate nohighlight">\(\mu_i\)</span> and <span class="math notranslate nohighlight">\(T\)</span> are defined as derivatives of <span class="math notranslate nohighlight">\(e\)</span> through the expression</p>
<div class="math notranslate nohighlight">
\[de=Tds+\sum_i\mu_i d\rho_i+\frac{\partial e}{\partial\phi}d\phi.\]</div>
<p>Of course, given where we’re headed, let’s rewrite this as</p>
<div class="math notranslate nohighlight">
\[ds=\frac{1}{T}de-\sum_i\frac{\mu_i}{T}d\rho_i+\frac{\partial s}{\partial \phi}d\phi.\]</div>
</section>
<section id="second-law">
<h3>Second Law<a class="headerlink" href="#second-law" title="Link to this heading">#</a></h3>
<p>We have chosen the entropy to “extend” non-classically, as it is the star actor
in the second law of thermodynamics, so we can write the entropy production
(which must be positive) as</p>
<div class="math notranslate nohighlight">
\[S^{\mathrm{prod}}=\frac{dS}{dt}+\int {\bf J}_s\cdot d{\bf A}\ge0,\]</div>
<p>where <span class="math notranslate nohighlight">\({\bf J}_s\)</span> is the flux of entropy.  We can compute (for an incompressible system)</p>
<div class="math notranslate nohighlight">
\[S^{\mathrm{prod}}=\int \left[\sum_i -\left(\frac{\mu_i}{T}\right)^{NC}\frac{D\rho_i}{Dt}+S_\phi\frac{D\phi}{Dt}+\frac{1}{T}\frac{De}{Dt}\right]dV+\int \left[{\bf J}_s-\sum_i \alpha_i^2\nabla\rho_i\frac{D\rho_i}{Dt}-\epsilon^2\nabla\phi\frac{D\phi}{Dt}\right]\cdot d{\bf A},\]</div>
<p>where we have introduced</p>
<div class="math notranslate nohighlight">
\[-\left(\frac{\mu_i}{T}\right)^{NC}=\frac{\partial s}{\partial \rho_i}+\alpha_i\nabla^2\rho_i,\]</div>
<p>and</p>
<div class="math notranslate nohighlight">
\[S_\phi=\frac{\partial s}{\partial\phi}+\epsilon^2\nabla^2\phi.\]</div>
<p>At this point we can insert the equations of motion we got from our
conservation laws and do <em>a lot</em> of algebra, which we leave as an amusing
exercise for the reader.  We eventually find that</p>
<div class="math notranslate nohighlight">
\[S^{\mathrm{prod}}=\int \left[-\sum_i\nabla\left(\frac{\mu_i}{T}\right)^{NC}\cdot{\bf J_i}+S_\phi\frac{D\phi}{Dt}+\nabla \frac{1}{T}\cdot{\bf J}_e+\frac{1}{T} {\bf Y}:\nabla {\bf v}\right]dV,\]</div>
<p>and</p>
<div class="math notranslate nohighlight">
\[{\bf J}_s=s^{NC}{\bf v} + \frac{1}{T}{\bf J}_e-\sum_i \left(\frac{\mu_i}{T}\right)^{NC}{\bf J}_i+\sum_i \alpha_i^2\frac{D\rho_i}{Dt}\nabla\rho_i+\epsilon^2\frac{D\phi}{Dt}\nabla\phi.\]</div>
<p>It is worth noting that this form for <span class="math notranslate nohighlight">\({\bf J}_s\)</span> eliminates the explicit
surface terms from the entropy production. We have also introduced the tensor
<span class="math notranslate nohighlight">\({\bf Y}\)</span> which is rather a complicated beast (it came from all those
integrations by parts which we have skipped in this presentation), and has the
form</p>
<div class="math notranslate nohighlight">
\[\frac{{\bf Y}}{T}=\frac{\sigma}{T}+\sum \alpha_i^2\nabla\rho_i\otimes\nabla\rho_i+\epsilon^2\nabla\phi\otimes\nabla\phi+\left(\frac{p}{T}-\sum_i \alpha_i^2\rho_i\nabla^2\rho_i-\sum_i\frac{\alpha_i^2}{2}|\nabla\rho_i|^2-\frac{\epsilon^2}{2}|\nabla\phi|^2\right){\bf I},\]</div>
<p>where <span class="math notranslate nohighlight">\(\bf I\)</span> is the identity tensor.</p>
</section>
<section id="constitutive-equations-and-evolution-equations">
<h3>Constitutive Equations and Evolution Equations<a class="headerlink" href="#constitutive-equations-and-evolution-equations" title="Link to this heading">#</a></h3>
<p>After all this work we can now find constitutive equations.  Inspection of the
final expression for <span class="math notranslate nohighlight">\(S^{\mathrm{prod}}\)</span>, suggests a that we can guarantee it
be positive definite (which is required from the second law) by assuming</p>
<div class="math notranslate nohighlight">
\[{\bf J}_i= -M_i\nabla\left(\frac{\mu_i}{T}\right)^{NC},\]</div>
<div class="math notranslate nohighlight">
\[{\bf J}_e=M_T\nabla\frac{1}{T},\]</div>
<div class="math notranslate nohighlight">
\[{\bf Y} = \eta \left(\nabla{\bf v}+(\nabla{\bf v})^T\right),\]</div>
<div class="math notranslate nohighlight">
\[\frac{D\phi}{Dt}=M_\phi S_\phi,\]</div>
<p>where we have introduced mobilities and the viscosity <span class="math notranslate nohighlight">\(\eta\)</span>. It should be
emphasized that we could have assumed all sorts of “cross-couplings” between
the various fluxes here, but instead we have made the simplest
assumptions. Inserting these into our equations of motion, we (at last!) arrive
at general evolution equations</p>
<div class="math notranslate nohighlight">
\[\frac{D e}{D t}=-M_T\nabla^2\frac{1}{T}+\nabla{\bf v}:\sigma,\]</div>
<div class="math notranslate nohighlight">
\[\frac{D \rho_i}{D t}=\nabla\cdot M_i\nabla\left(-\frac{\partial s}{\partial \rho_i}-\alpha_i^2 \nabla^2\rho_i\right)\]</div>
<div class="math notranslate nohighlight">
\[\frac{D\phi}{Dt}=M_\phi\left(\frac{\partial s}{\partial\phi}+\epsilon^2\nabla^2\phi\right).\]</div>
<div class="math notranslate nohighlight">
\[\frac{\sigma}{T}=\frac{\eta}{T}\left(\nabla{\bf v}+(\nabla{\bf v})^T\right)-\sum_i \alpha_i^2\nabla\rho_i\otimes\nabla\rho_i+\epsilon^2\nabla\phi\otimes\nabla\phi-\left(\frac{p}{T}-\sum \alpha_i^2\rho_i\nabla^2\rho_i-\sum\frac{\alpha_i^2}{2}|\nabla\rho_i|^2-\frac{\epsilon^2}{2}|\nabla\phi|^2\right){\bf I},\]</div>
<p>with</p>
<div class="math notranslate nohighlight">
\[\rho\frac{D{\bf v}}{Dt}=\nabla\cdot\sigma.\]</div>
</section>
<section id="further-reduction-of-the-problem">
<h3>Further reduction of the problem<a class="headerlink" href="#further-reduction-of-the-problem" title="Link to this heading">#</a></h3>
<p>We have presented the derivation of equations of evolution for an
incompressible, two-phase, multicomponent system.  Most phase field treatments
ignore the velocity terms, but for pedagogical purposes we have retained all of
the terms that arise from flow (for an incompressible system). These terms
should not just be tossed away without careful consideration of the system of
interest! Nonetheless, now that we have taken care to show how these terms
arise, and also, for careful readers, how to extend this approach to multiple
phases and additional gradient corrections, we will proceed with some more
simplifications for a less complex system.  For those who are interested in
solid state systems that can creep, the work of Mishin, Warren, Sekerka, and
Boettinger (2013) <span id="id5">[<a class="reference internal" href="#id21" title="Y. Mishin, J. A. Warren, R. F. Sekerka, and W. J. Boettinger. Irreversible thermodynamics of creep in crystalline solids. Physical Review B, 88(18):184303, November 2013. URL: https://link.aps.org/doi/10.1103/PhysRevB.88.184303 (visited on 2024-09-05), doi:10.1103/PhysRevB.88.184303.">MWSB13</a>]</span> extends this framework.
Here we eliminate the <span class="math notranslate nohighlight">\({\bf v}\)</span> equations by fiat, assuming that only diffusion
controls the evolution of the system, which is often reasonable in microgravity
situations.  We can also go further, and consider an isothermal system. Then we
have</p>
<div class="math notranslate nohighlight">
\[\frac{\partial \rho_i}{\partial t}=\nabla\cdot M_i\nabla\left(-\frac{\partial s}{\partial \rho_i}-\alpha^2_i\nabla^2\rho_i\right),\]</div>
<div class="math notranslate nohighlight">
\[\frac{\partial\phi}{\partial t}=M_\phi\left(\frac{\partial s}{\partial\phi}+\epsilon^2\nabla^2\phi\right).\]</div>
<p>This system of equations should be adequate to describe a diffusion-controlled
multicomponent, isothermal, two-phase system. One could, of course, retain
thermal diffusion, add more phases, retain the velocity terms and more!</p>
</section>
</section>
<section id="clearly-define-the-equations-parameters-initial-conditions-and-boundar-conditions">
<h2>Clearly define the equations, parameters, initial conditions, and boundar conditions<a class="headerlink" href="#clearly-define-the-equations-parameters-initial-conditions-and-boundar-conditions" title="Link to this heading">#</a></h2>
<p>Now that we have specified that we wish to consider, a diffusion-controlled
multicomponent, isothermal, two-phase system. We still need to decide on the
specifics of the system, and, in particular, the thermodynamic state functions
that detail how the energy or entropy vary.  All of the variables need to be
clearly defined, and ideally should be either parameters that can be traced to
thermodynamic variables or other physical constraints.  As noted, we wish to
consider an isothermal system, and so we can use a Legendre transformation to
replace <span class="math notranslate nohighlight">\(s\)</span> in the above expressions with the Helmholtz free energy <span class="math notranslate nohighlight">\(f=e-Ts\)</span>.</p>
<div class="math notranslate nohighlight">
\[\frac{\partial \rho_i}{\partial t}=\nabla\cdot M_i\nabla\left(\frac{1}{T}\frac{\partial f}{\partial \rho_i}-\alpha^2_i\nabla^2\rho_i\right)\]</div>
<div class="math notranslate nohighlight">
\[\frac{\partial\phi}{\partial t}=M_\phi\left(-\frac{1}{T}\frac{\partial f}{\partial\phi}+\epsilon^2\nabla^2\phi\right).\]</div>
<p>Additionally, we will now only consider only a two component systems, so we
only have species <span class="math notranslate nohighlight">\(\rho_1\)</span> and <span class="math notranslate nohighlight">\(\rho_2\)</span>. Note that the total density
<span class="math notranslate nohighlight">\(\rho=\rho_1+\rho_2\)</span> is a constant (for an incompressible system).  We could
formulate the problem in terms of these variables or we can move to a
concentration <span class="math notranslate nohighlight">\(c_1=\rho_1/(\rho_1+\rho_2)\)</span>.  Clearly <span class="math notranslate nohighlight">\(c_1+c_2=1\)</span>, so we only
have one independent variable. In this case we can pick <span class="math notranslate nohighlight">\(c_1\)</span> or <span class="math notranslate nohighlight">\(c_2\)</span> as the
independent variable and label it <span class="math notranslate nohighlight">\(c\)</span>.  As the reader can see, these types of
exercises are highly non-trivial, require substantial care, and need to be done
with rigor to understand the host of approximations and assumptions that can be
made (at a minimum here we have ignored elasticity, different molar volumes for
the species, and other issues are external fields, and there will be more to
come!). We move to a concentration picture and <em>redefine</em> the mobilities,
<span class="math notranslate nohighlight">\(\alpha\)</span>, and <span class="math notranslate nohighlight">\(\epsilon\)</span> in such a way that the following expressions hold:</p>
<div class="math notranslate nohighlight">
\[\frac{\partial c}{\partial t}=\nabla\cdot M_i\nabla\left(\frac{\partial f}{\partial c}-\alpha^2\nabla^2c\right)\]</div>
<div class="math notranslate nohighlight">
\[\frac{\partial\phi}{\partial t}=M_\phi\left(\epsilon^2\nabla^2\phi-\frac{\partial f}{\partial\phi}\right).\]</div>
<section id="state-function">
<h3>State function<a class="headerlink" href="#state-function" title="Link to this heading">#</a></h3>
<p>We now need to specify <span class="math notranslate nohighlight">\(f(c,T,\phi)\)</span>.  Note that we have retained the <span class="math notranslate nohighlight">\(T\)</span>
dependence here, even though we are considering an isothermal
system. Isothermal does not mean temperature independent! Additionally, in the
expressions just above we “absorbed” <span class="math notranslate nohighlight">\(T\)</span> into some of the coefficients.  These
parameters can depend on <span class="math notranslate nohighlight">\(T\)</span>, but often the dependencies are unknown or should
only be included if the phenomena under consideration demand such an
inclusion. In the interest of pedagogy, we recapitulate one approach to
modeling a liquid-solid binary alloy, although the details are less important
that understanding that a specific choice of state function has to come from
<em>somewhere</em>. Following the treatment in the Annual Reviews of Materials
Research (2001) by Boettinger, Warren, Beckerman and Karma
<span id="id6">[<a class="reference internal" href="#id14" title="W. J. Boettinger, J. A. Warren, C. Beckermann, and A. Karma. Phase-field simulation of solidification. Annual Review of Materials Research, 32(1):163–194, August 2002. URL: https://www.annualreviews.org/doi/10.1146/annurev.matsci.32.101901.155803 (visited on 2024-09-05), doi:10.1146/annurev.matsci.32.101901.155803.">BWBK02</a>]</span> we note that the free energy can be
determined through a multi-step process where the two components are called <span class="math notranslate nohighlight">\(A\)</span>
and <span class="math notranslate nohighlight">\(B\)</span> respectively:</p>
<section id="step-1">
<h4>Step 1<a class="headerlink" href="#step-1" title="Link to this heading">#</a></h4>
<p>Start with the ordinary free energy of the pure components as liquid and solid
phases, <span class="math notranslate nohighlight">\(f_L^A(T)\)</span>, <span class="math notranslate nohighlight">\(f_L^B(T)\)</span>, <span class="math notranslate nohighlight">\(f_S^A(T)\)</span>, <span class="math notranslate nohighlight">\(f_S^B(T)\)</span>. They are functions of
temperature only.</p>
</section>
<section id="step-2">
<h4>Step 2<a class="headerlink" href="#step-2" title="Link to this heading">#</a></h4>
<p>Form a function that represents both liquid and solid for pure A</p>
<div class="math notranslate nohighlight">
\[f^A(\phi,T)=(1-p(\phi))f^A_S+p(\phi)f^A_L+W^Ag(\phi).\]</div>
<p>This function combines the free energies of the liquid and solid with the
interpolating function <span class="math notranslate nohighlight">\(p(\phi)\)</span> and adds an energy hump, <span class="math notranslate nohighlight">\(W^Ag(\phi)\)</span>, between
them. A similar expression can be obtained for component B. Note that <span class="math notranslate nohighlight">\(g(\phi)\)</span>
has minima at <span class="math notranslate nohighlight">\(\phi=0\)</span> and <span class="math notranslate nohighlight">\(\phi=1\)</span> with a maximum at <span class="math notranslate nohighlight">\(\phi=0.5\)</span> while
<span class="math notranslate nohighlight">\(p(0)=0\)</span>, <span class="math notranslate nohighlight">\(p(1)=1\)</span> and <span class="math notranslate nohighlight">\(p'=0\)</span> when <span class="math notranslate nohighlight">\(\phi=0\)</span> or <span class="math notranslate nohighlight">\(\phi=1\)</span>.  A popular choice for
these functions is <span class="math notranslate nohighlight">\(p(\phi)=\phi^3(10-15\phi+6\phi^2)\)</span> and
<span class="math notranslate nohighlight">\(g(\phi)=\\phi^2(1-\phi)^2\)</span>.  Note also the <span class="math notranslate nohighlight">\(\partial p/\partial\phi=30g(\phi)\)</span>
by construction.</p>
</section>
<section id="step-3">
<h4>Step 3<a class="headerlink" href="#step-3" title="Link to this heading">#</a></h4>
<p>Form the function, <span class="math notranslate nohighlight">\(f(\phi,c,T)\)</span>, that represents (for example) a regular
solution of A and B,</p>
<div class="math notranslate nohighlight">
\[f(\phi,c,T)=(1-c)f^A(\phi)+cf^B(\phi) +RT((1-c)\ln(1-c)+c\ln c)+c(1-c)\left[\Omega_S(1-p(\phi))+\Omega_L p(\phi)\right],\]</div>
<p>where <span class="math notranslate nohighlight">\(\Omega_L\)</span> and <span class="math notranslate nohighlight">\(\Omega_S\)</span> are the regular solution parameters of the
liquid and solid that again are combined with the interpolating function
<span class="math notranslate nohighlight">\(p(\phi)\)</span>. The gas constant R needs to be chosen with the correct normalization
so that RT has units of energy per unit volume.</p>
<p>With this specific choice of a regular solution free energy we at last have
fully specified a system and its evolution!</p>
</section>
</section>
</section>
<section id="clearly-define-and-pose-your-physical-problem-before-solving">
<h2>Clearly define and pose your physical problem before solving<a class="headerlink" href="#clearly-define-and-pose-your-physical-problem-before-solving" title="Link to this heading">#</a></h2>
<p>Regardless of the explicit functional choices for the state function, the most
important point made above is that the phase field method requires an explicit
choice for this function.  Once we have selected it, the equations derived
above detail the evolution of the phase, composition, temperature, etc.  Here
we chose only to consider phase and composition, with temperature as a
parameter. Having fully specified the state function, the next question is
really about practical issues around a specific simulation. What are the
boundary conditions? What are the relevant length scales.  Here is a list of
issues:</p>
<section id="complete-dimensional-analysis-and-understanding-relevant-scales-state-the-reference-frame">
<h3>Complete dimensional analysis and understanding relevant scales; state the reference frame<a class="headerlink" href="#complete-dimensional-analysis-and-understanding-relevant-scales-state-the-reference-frame" title="Link to this heading">#</a></h3>
<p>There are any number of dimensionless parameters that can be found in these
models.  Understanding their relative role is beyond the scope of this best
practice guide, but constructing these numbers is straightforward and
essential. Usually before attempting to solve the equations, it is useful to
“scale” the equations, thereby reducing the total number of parameter in the
problem. In general we can always rescale space and time to eliminate two
parameters. For example, a natural unit for length <span class="math notranslate nohighlight">\(\ell\)</span> might be defined in
terms of a scale of the free energy density <span class="math notranslate nohighlight">\(\bar f\)</span></p>
<div class="math notranslate nohighlight">
\[\ell^2=\frac{\epsilon^2}{\bar f}.\]</div>
<p>Using this definition of <span class="math notranslate nohighlight">\(\ell\)</span> we can then get a time scale <span class="math notranslate nohighlight">\(\tau\)</span> as</p>
<div class="math notranslate nohighlight">
\[\tau=\frac{1}{M_\phi\bar f}.\]</div>
<p>Using these units will eliminate two parameters that need to explored when
seeking solutions.</p>
</section>
<section id="plot-your-state-functions-before-implementing-them-in-code">
<h3>Plot your state functions before implementing them in code<a class="headerlink" href="#plot-your-state-functions-before-implementing-them-in-code" title="Link to this heading">#</a></h3>
<p>While we derived a specific choice of the free energy above, regardless of
where you got the free energy (or other state function) it is wise to plot the
function, as this will give you a quick check that your state function is well
posed, has minima where you expect them to be.</p>
</section>
<section id="consider-the-impact-of-interpolation-functions-barrier-functions-etc">
<h3>Consider the impact of interpolation functions, barrier functions, etc.<a class="headerlink" href="#consider-the-impact-of-interpolation-functions-barrier-functions-etc" title="Link to this heading">#</a></h3>
<p>We chose specific forms for our interpolation function <span class="math notranslate nohighlight">\(p\)</span> and the barrier
function <span class="math notranslate nohighlight">\(g\)</span>. These were not arbitrary choices, but nonetheless, they are
hardly the only choices we could have made, just relatively popular. All such
choices can result in simulation regions where “surprises” can occur, often due
to insufficient spatiotemporal resolution.</p>
</section>
<section id="consider-every-boundary-term-and-make-sure-you-arent-eliminating-important-terms-check-the-fluxes">
<h3>Consider every boundary term and make sure you aren’t eliminating important terms. Check the fluxes<a class="headerlink" href="#consider-every-boundary-term-and-make-sure-you-arent-eliminating-important-terms-check-the-fluxes" title="Link to this heading">#</a></h3>
<p>When implementing the boundary conditions, extreme care must be taken.  One
cannot just “zero-out” boundary terms, as this may break some requirement about
mass conservation or other physical constraint.</p>
<ul class="simple">
<li><p>(Show examples on PFHub, possibly benchmark problems?)</p></li>
<li><p>Be mindful of your assumptions and approximations</p></li>
</ul>
<p>Having clearly defined the mathematical framework underlying the problem, it
becomes important, prior to progressing further, to contemplate and thoroughly
grasp the various assumptions and approximations inherent within the
formulation. Often, the exacting mathematical underpinnings from which the
model has arisen may have presented challenges of being intractable in their
complexity, or alternatively, they might have been of an impractical nature or
even lacking contact with empirical observations.</p>
<p>The considerations surrounding assumptions and approximations are distributed
throughout various places throughout the model’s formulation. Foremost, are the
descriptors of thermodynamic energy density, which provide the basis for our
understanding of energy relationships, as well as the delineations of boundary
conditions and the specifications of initial conditions. Notably, the latter
two warrant attention since, in the absence of these conditions, the partial
differential equations that determine the temporal evolution of our problem
could only hypothetically yield an infinite set of solutions.</p>
<ul class="simple">
<li><p>If possible, run a small test problem with and without approximations and to
quantify their impact</p></li>
<li><p>Consider how approximations change in different dimensions and symmetries</p></li>
<li><p>If possible, avoid assuming symmetry to reduce the complexity of your problem</p></li>
</ul>
</section>
</section>
<section id="carefully-consider-your-length-and-time-scales">
<h2>Carefully consider your length and time scales<a class="headerlink" href="#carefully-consider-your-length-and-time-scales" title="Link to this heading">#</a></h2>
<ol class="arabic">
<li><p><strong>Identify the Smallest Feature Size of Interest in Your Problem:</strong> The
smallest feature size refers to the smallest spatial scale that needs to be
accurately resolved in your simulation. This could be, for example, the
width of an interface between two distinct materials or the size of a fine
structure. Properly resolving the smallest features is essential for
capturing detailed interactions and behaviors in your system.</p>
<p><strong>Additional Item 1: Generally the smallest feature is the interface width
between the features that need to be resolved.</strong> The interface width often
represents the smallest detail that demands attention. Neglecting this width
may lead to inaccurate results and incomplete understanding of the system’s
behavior.</p>
</li>
<li><p><strong>Identify the Smallest Time Scale of Interest in Your Problem:</strong> The
smallest time scale corresponds to the fastest processes occurring in your
system. It’s important to accurately capture these time scales to ensure
that rapid events are not overlooked or misrepresented.</p>
<p><strong>Additional Item 2: The time steps you consider shall be small enough to
allow capturing the kinetics of the process you want to model.</strong> Choosing
appropriate time steps is crucial to accurately capture dynamic
processes. Smaller time steps are necessary to capture fast kinetics and
prevent underestimation or distortion of time-dependent phenomena.</p>
</li>
<li><p><strong>Identify the Smallest Length Scales of Interest for All Physics and
Consider How They Interact:</strong> This involves analyzing the smallest spatial
scales relevant to each physical process in your simulation. Understanding
how these different length scales interact is essential for capturing
multi-scale effects accurately.</p>
<p><strong>Additional Item 3: Depending on the numerical method used for solving the
equations, you may need 5-10 mesh elements to resolve the interface.</strong> The
mesh resolution, i.e., the number of mesh elements used to discretize the
domain, plays a crucial role in capturing interfaces accurately. Higher mesh
resolution is required to resolve fine interfaces properly.</p>
</li>
<li><p><strong>The Sample Size You Consider Will Be Relevant to Your Feature Size:</strong> The
size of the simulation domain should be appropriately chosen based on the
scale of the features you are interested in. Having a domain that is much
larger than necessary can lead to unnecessary computational costs, while
having a domain that is too small might exclude important interactions.</p></li>
<li><p><strong>It Is Recommended to Formulate Your Problem in a Non-Dimensional Form If
Possible:</strong> Non-dimensionalization involves scaling variables in your
equations to remove physical units. This can help simplify the equations,
reduce the number of parameters, and make the problem more amenable to
analysis and comparison.</p></li>
<li><p><strong>If You Consider an Initial Condition Far from the Expected Steady State
Solution, You May Need to Select a Significantly Smaller Time Step:</strong> When
the initial condition differs significantly from the expected steady state,
smaller time steps may be necessary to accurately capture the transient
behavior and prevent numerical instability.</p></li>
<li><p><strong>Be Mindful of Initial Conditions You Select:</strong> Poorly chosen initial
conditions, especially for interfaces or abrupt changes, can lead to
numerical artifacts, excessive computational demands, and inaccurate
results. It’s important to select physically meaningful initial conditions
that smoothly transition into the desired system state.</p>
<p><strong>Additional Item 7: They may also result in numerical artifacts that lead
to artificial stabilization of unstable phases.</strong> Inaccurate initial
conditions can stabilize phases that would otherwise be unstable, leading
to unrealistic outcomes in your simulation.</p>
</li>
<li><p><strong>Using Automatic Time Stepping Integrator Algorithms Can Benefit PF
Simulations:</strong> Automatic time stepping algorithms adjust the time step size
during simulation based on the system’s dynamics. This can improve
simulation efficiency by using larger time steps during stable periods and
smaller steps during dynamic events.</p></li>
</ol>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading">#</a></h2>
<p>In summary, these considerations highlight the importance of careful parameter
selection, proper resolution of length and time scales, and accurate initial
conditions when performing numerical simulations. Addressing these aspects
helps ensure the reliability and validity of your simulation results in various
scientific and engineering applications.</p>
<ul class="simple">
<li><p>Non-dimensionalization</p>
<ul>
<li><p>It gets MUCH harder with coupled physics, so be careful</p></li>
</ul>
</li>
</ul>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Link to this heading">#</a></h2>
<div class="docutils container" id="id7">
<div role="list" class="citation-list">
<div class="citation" id="id13" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span>BS98<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id1">1</a>,<a role="doc-backlink" href="#id4">2</a>)</span>
<p>Zhiqiang Bi and Robert F. Sekerka. Phase-field model of solidification of a binary alloy. <em>Physica A: Statistical Mechanics and its Applications</em>, 261(1):95–106, December 1998. URL: <a class="reference external" href="https://www.sciencedirect.com/science/article/pii/S0378437198003641">https://www.sciencedirect.com/science/article/pii/S0378437198003641</a> (visited on 2024-09-05), <a class="reference external" href="https://doi.org/10.1016/S0378-4371(98)00364-1">doi:10.1016/S0378-4371(98)00364-1</a>.</p>
</div>
<div class="citation" id="id14" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id6">BWBK02</a><span class="fn-bracket">]</span></span>
<p>W. J. Boettinger, J. A. Warren, C. Beckermann, and A. Karma. Phase-field simulation of solidification. <em>Annual Review of Materials Research</em>, 32(1):163–194, August 2002. URL: <a class="reference external" href="https://www.annualreviews.org/doi/10.1146/annurev.matsci.32.101901.155803">https://www.annualreviews.org/doi/10.1146/annurev.matsci.32.101901.155803</a> (visited on 2024-09-05), <a class="reference external" href="https://doi.org/10.1146/annurev.matsci.32.101901.155803">doi:10.1146/annurev.matsci.32.101901.155803</a>.</p>
</div>
<div class="citation" id="id15" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">GM13</a><span class="fn-bracket">]</span></span>
<p>S. R. De Groot and P. Mazur. <em>Non-Equilibrium Thermodynamics</em>. Courier Corporation, January 2013. ISBN 9780486153506. Google-Books-ID: mfFyG9jfaMYC.</p>
</div>
<div class="citation" id="id20" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">Mal69</a><span class="fn-bracket">]</span></span>
<p>Lawrence E. Malvern. <em>Introduction to the Mechanics of a Continuous Medium</em>. Prentice-Hall, 1969. ISBN 9780134876030. Google-Books-ID: IIMpAQAAMAAJ.</p>
</div>
<div class="citation" id="id21" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id5">MWSB13</a><span class="fn-bracket">]</span></span>
<p>Y. Mishin, J. A. Warren, R. F. Sekerka, and W. J. Boettinger. Irreversible thermodynamics of creep in crystalline solids. <em>Physical Review B</em>, 88(18):184303, November 2013. URL: <a class="reference external" href="https://link.aps.org/doi/10.1103/PhysRevB.88.184303">https://link.aps.org/doi/10.1103/PhysRevB.88.184303</a> (visited on 2024-09-05), <a class="reference external" href="https://doi.org/10.1103/PhysRevB.88.184303">doi:10.1103/PhysRevB.88.184303</a>.</p>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./bp-guide-gh"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../intro.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Phase Field Method Recommended Practices</p>
      </div>
    </a>
    <a class="right-next"
       href="ch2-numerical-implementation.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Numerical Implementation</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#general-considerations-on-the-formulation-of-phase-field-models">General Considerations on the formulation of phase field models</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#evolution-equations">Evolution equations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mass">Mass</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#momentum">Momentum</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#energy">Energy</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#first-law-of-thermodynamics">First Law of Thermodynamics</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#second-law">Second Law</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#constitutive-equations-and-evolution-equations">Constitutive Equations and Evolution Equations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#further-reduction-of-the-problem">Further reduction of the problem</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clearly-define-the-equations-parameters-initial-conditions-and-boundar-conditions">Clearly define the equations, parameters, initial conditions, and boundar conditions</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#state-function">State function</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#step-1">Step 1</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#step-2">Step 2</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#step-3">Step 3</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clearly-define-and-pose-your-physical-problem-before-solving">Clearly define and pose your physical problem before solving</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#complete-dimensional-analysis-and-understanding-relevant-scales-state-the-reference-frame">Complete dimensional analysis and understanding relevant scales; state the reference frame</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-your-state-functions-before-implementing-them-in-code">Plot your state functions before implementing them in code</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#consider-the-impact-of-interpolation-functions-barrier-functions-etc">Consider the impact of interpolation functions, barrier functions, etc.</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#consider-every-boundary-term-and-make-sure-you-arent-eliminating-important-terms-check-the-fluxes">Consider every boundary term and make sure you aren’t eliminating important terms. Check the fluxes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#carefully-consider-your-length-and-time-scales">Carefully consider your length and time scales</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By PFHub Workshop Community
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>